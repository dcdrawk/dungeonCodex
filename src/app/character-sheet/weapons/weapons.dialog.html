<md-dialog aria-label="Weapons Dialog" class="size-xl">

  <!-- Toolbar -->
  <md-toolbar>
    <div class="md-toolbar-tools">

      <!-- Title -->
      <h2>Weapons</h2>
      <span flex></span>

      <!-- Close Button -->
      <md-button class="md-icon-button" ng-click="dialog.cancel()">
        <md-icon aria-label="Close dialog" class="material_icons">close</md-icon>
      </md-button>
    </div>
  </md-toolbar>

  <!-- Dialog Content -->
  <md-dialog-content layout="column">
    <md-content>
      <md-tabs md-dynamic-height md-border-bottom md-stretch-tabs="always">
        <md-tab label="Equiped">
          <md-content class="md-padding">
            <!-- Loading Spinner -->
            <md-button ng-click="" class="md-fab md-accent" aria-label="Add New Weapon">
              <md-icon class="material-icons ">add</md-icon>
            </md-button>
            <div class="loading-spinner" layout-align="space-around" layout-sm="column" layout="row" ng-if="!dialog.classFeatures.abilities">
              <md-progress-circular md-diameter="96" md-mode="indeterminate"></md-progress-circular>
            </div>

            <!-- Filters -->
            <section class="md-padding" class="md-padding" id="class-features-filters" layout-wrap layout="row" ng-if="dialog.classFeatures.abilities">

              <!-- Class -->
              <md-input-container flex="20">
                <label>Class</label>
                <md-select ng-change="dialog.getClassFeatures(dialog.className); dialog.getArchetypesList();" ng-model="dialog.className">
                  <md-option ng-repeat="class in dialog.classList" value="{{class}}">{{class}}</md-option>
                </md-select>
              </md-input-container>


              <md-input-container flex="20">
                <label>Archetype</label>
                <md-select ng-change="dialog.getArchetypeFeatures(dialog.archetypeName)" ng-model="dialog.archetypeName">
                  <md-option ng-repeat="archetype in dialog.archetypeList" value="{{archetype.title}}">{{archetype.title}}</md-option>
                </md-select>
              </md-input-container>

              <!-- Level -->
              <md-input-container flex="20">
                <label>Level</label>
                <input max="20" min="1" ng-model="dialog.level" type="number"></input>
              </md-input-container>

              <!-- Order By -->
              <md-input-container flex="20">
                <label>Order By</label>
                <md-select ng-model="dialog.orderBy">
                  <md-option selected value="level">Level</md-option>
                  <md-option value="title">Title</md-option>
                </md-select>
              </md-input-container>

              <!-- Direction -->
              <md-input-container flex="20">
                <label>Direction</label>
                <md-select ng-model="dialog.direction">
                  <md-option selected value="false">Ascending</md-option>
                  <md-option value="true">Descending</md-option>
                </md-select>
              </md-input-container>
            </section>
            <!-- Class Features List -->
            <section id="class-features-list" layout="column" ng-if="dialog.classFeatures.abilities">
              <md-content>
                <md-list>
                  <md-list-item class="md-3-line" ng-if="feature.level <= dialog.level" flex="100" ng-repeat="feature in features = dialog.classFeatures.abilities.concat(dialog.archetypeFeatures.abilities) | orderBy : dialog.orderBy : dialog.direction==='true'">
                    <div class="md-list-item-text  md-long-text" layout="column">
                      <h3>{{ feature.title }}</h3>
                      <h4>Level {{ feature.level | number}}</h4>
                      <p ng-bind-html="feature.description"></p>
                    </div>
                    <md-divider></md-divider>
                  </md-list-item>

                  <md-divider></md-divider>
                </md-list>
              </md-content>
            </section>
        </md-tab>
        <md-tab label="Browse">
          <md-content class="md-padding">
            <md-autocomplete ng-model="dialog.searchText" ng-disabled="dialog.isDisabled" md-no-cache="dialog.noCache" md-selected-item="dialog.selectedItem" md-search-text-change="" md-search-text="dialog.searchText" md-selected-item-change="" md-items="item in dialog.filterWeapons(dialog.searchText) | orderBy : 'item.name'" md-item-text="item.name" md-min-length="1" placeholder="Search Weapons">
              <md-item-template>
                <span md-highlight-text="dialog.searchText" md-highlight-flags="^i">{{item.name}}</span>
              </md-item-template>
              <md-not-found>
                No Weapons matching "{{dialog.searchText}}"
                <a ng-click="ctrl.newState(ctrl.searchText)">Create a new one!</a>
              </md-not-found>
            </md-autocomplete>

          </md-content>
        </md-tab>
      </md-tabs>
      </md-content>
  </md-dialog-content>
  <!-- </form> -->
</md-dialog>
